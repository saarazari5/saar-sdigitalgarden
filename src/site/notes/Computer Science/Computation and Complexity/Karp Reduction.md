---
{"dateCreated":"2023-03-25 13:57","tags":["computational_complexity","computational_models","computer_science"],"pageDirection":"rtl","dg-publish":true,"permalink":"/computer-science/computation-and-complexity/karp-reduction/","dgPassFrontmatter":true}
---


# רדוקצייה
נאמר כי קיימת רדוקציה מבעיה $A$ לבעיה $B$ אם אפשר לפתור את $A$ על ידי גישה לאלגוריתם שפותר את $B$.

## רדוקציית קארפ
תהיינה $S_{1},S_{2}$ [[Computer Science/Computation and Complexity/Search and Decision Problems#בעיות הכרעה\|בעיות הכרעה]]. רדוקציית קארפ מ $S_{1}$ ל $S_{2}$ הינה פונקצייה $f$ שניתנת לחישוב בזמן פולינומי ומקיימת 

$$\forall_{x}: x\in S_{1}\leftrightarrow f(x)\in S_{2}$$

![Pasted image 20230325150519.png|300](/img/user/Assets/Pasted%20image%2020230325150519.png)

>[!info] __טרנזיטיביות של רדוקציות קארפ__ 
רידוקציות בין 3 בעיות $A,B,C$ הן טרנזיטיביות כלומר אם קיימת רידוקציית קארפ מ $A\to B$ וריקודציית קארפ מ $B\to C$ אז קיימת רידוקציית קארפ $A\to C$ 

>[!note] הערה
>אם יש רדוקציית קארפ מ $S_{1}$ ל $S_{2}$ יש גם רדוקציית קוק מ $S_1$ ל $S_{2}$ שכן נוכל לכל $x$ לחשב $f(x)$  ולבדוק האם $f(x)\in S_{2}$ 

__משפט:__ אם $S_{2}\in P$ וכן יש רדוקציית קארפ מ $S_{1}$ ל $S_{2}$ אזי $S_{1}\in P$ .
_הוכחה:_ נבנה את האלגוריתם ל $S_{1}$ בהינתן קלט $x$
1) חשב $f(x)$ 
2) החזר $f(x)\in S_{2}$ 

### IS ו 3-SAT
 נבנה רידוקצייה קארפ מבעיות ההכרעה של [[Computer Science/Computation and Complexity/Search and Decision Problems#3-SAT\|3-SAT]] ל [[Computer Science/Computation and Complexity/Search and Decision Problems#Independent Set\|IS]] כלומר 

$$\displaylines{
S_{3SAT} = \{\rho  \ |  \ \rho \text{ is a CNF formula that can be saturated}\} \\
S_{IS}= \{(G,k) \ | \ \text{G is a graph with an independent set of size k}\}
}$$

כדי להוכיח שקיימת רידוקצייה כזאת נרצה למצוא פונקצייה $f$ חשיבה פולינומית שתקיים 

$$f(\rho) = (G,k)\in S_{IS}\leftrightarrow \rho\in S_{3SAT}$$

נתאר את הרידוקצייה באמצעות דוגמה על הנוסחה 

$$\rho = (x_{1}\vee\overline{x_{2}}\vee x_{3})\wedge (\overline{x_{1}}\vee \overline{x_{3}}\vee x_{4})\wedge(\overline{x_{1}}\vee \overline{x_{4}}\vee x_{3}) $$

נבנה את $G_{\rho}$ באופן הבא: 
1. כל שלישייה תהווה שלושה קודקודים שכולם מחוברים אחד לשני עם קשת.
2. בין כל ליטרל נעביר קשת לשלישה שלו אם קיימת כזאת.

כך למשל עבור הנוסחה הנ״ל נקבל 

![Pasted image 20230325152832.png|500](/img/user/Assets/Pasted%20image%2020230325152832.png)

וניתן לראות שקיימת השמה מספקת מהצורה $x_{1},x_{4},x_{3}$ שזאת גם קבוצה $k=3$ בלתי תלויה של קודקודים.

__תיאור הרידוקציה__ (קלט: $\rho$ ב $3CNF$) 
נבנה גרף $G$ ומספר $k$ באופן הבא:
כל מופע של ליטרל ב $\rho$ יהיה קודקוד ולכן מספר הקודקודים ב $G$ הוא מספר הפסוקיות כפול $3$ .
הקשתות ב $G$ יהיו בין כל הליטרלים תחת אותה הפסוקית ובין כל ליטרל ושלילתו.
$k$ מהווה את מספר הפסוקיות ב $\rho$ 

__הוכחה נכונות__:
נרצה להוכיח שאם $\rho$ ספיקה אז $f(\rho)\in S_{IS}$ ובנוסף נוכיח את הcp של הכיוון השני כלומר $\rho$ לא ספיקה אז. $f(\rho)\notin S_{IS}$.

$\leftarrow$ יהי $\rho$ ספיקה אז נוכיח שבגרף שאנחנו בונים יש $IS$ בגודל $k$ .
אם היא ספיקה אז בכל פסוקית יש לפחות ליטרל אחד שמקבל $T$ בכל פסוקית. נוכל לבחור ליטרל אחד _בידיוק_ מכל פסוקית שקיבל $T$ והקודקודים שנבחרו מהווים קבוצה בת״ל בגודל מספר הפסוקיות. הקבוצה הזאת היא בת״ל כי לא ייתכן שבכל פסוקית ליטרל ושלילתו יהיו $T$ ולכן מאיך שבנינו את הגרף בין כל הקודקודים האחרים כשכל אחד מפסוקית אחרת לא תהיה קשת. 

$\rightarrow$ אם $G$ מכילה קבוצה בת״ל בגודל $k$ קבוצה זאת חייבת לקחת בידיוק קודקוד אחד מכל עמודה (שקול לפסוקית) וכל שנשאר לעשות זה להציב True עבור הליטרלים שבחרנו.

### כמעט קליקה
נאמר שקבוצת קודקודים $S$ בגרף $G=(V,E)$ היא כמעט קליקה אם יש קשתות בין כל זוג קודקודים ב $S$ למעט אחד.

נגדיר את בעיית ההכרעה 

$$Almost-Clique = \{(G,k) \ |  \ \text{G has an almost k size clique}\}$$

נרצה לבנות רידוקצייה קארפ מ Clique ל Almost-Clique באופן הבא:
בהנתן גרף $(G,k)$ נבנה $(G^{\prime},k^{\prime})$ כך ש 

$$(G,k)\in Clique \leftrightarrow (G^{\prime},k^{\prime})\in Almost-clique$$

נבנה זאת על ידי 

$$V^{\prime}= V\cup \{u^{\prime},u^{\prime\prime }\}$$
$$E^{\prime}= E\cup \{(v,u^{\prime}),(v,u^{\prime\prime }) \ \ | \ \ v\in V\}$$

ויתקיים $k^{\prime}=k+2$

כלומר הוספנו שתי קודקודים וחיברנו אותם עם כל הקודקודים בגרף הישן.
נוכיח שאם אחד הוא קליקה אז השני הוא כמעט קליקה.

נניח ש $(G,k)$ הוא קליקה ונסמן ב $S$ את הקליקה ב $G$. לפי הבנייה ברור כי $S\cup\{u^{\prime},u^{\prime\prime}\}$ הוא כמעט קליקה בגודל $k+2$ שכן אין קשת בין הקודקודים שהוספנו.

כעת נניח ש $(G^{\prime},k^{\prime})$ היא כמעט קליקה ולכן קיימת כמעט קליקה $S^{\prime}$ בגודל $k^{\prime}$ .
אם שתי הקודקודים שהוספנו שייכים ל $S^{\prime}$ אז הקשת החסרה היא בהכרח $(u^{\prime},u^{\prime\prime})$ ולכן כשנוריד את הקודקודים האלו נקבל $S$ קליקה בגודל $k^{\prime}-2$ ב $G$.
אם זה לא המצב, קיימים שני קודקודים אחרים $u,v\in S^{\prime}$ שאין בינהם קשת ולכן נוכל פשוט להוריד את את אחד מהם ביחד עם הקודוקדים שהוספנו אם צריך ונקבל שוב קליקה.

>[!info] הבחנה
>1. לכל בעיית הכרעה $S$ יש רדוקציית קוק ל $\overline{S}$  
>2. לא לכל בעיית הכרעה $S$ יש רדוקציית קארפ ל $\overline{S}$ למשל אם $S$ היא קבוצת כל הקלטים ו $\overline{S}=\emptyset$ 

### קליקה ו IS
נבנה רידוקציית קארפ מ $IS$ ל $clique$ באופן הבא:
בהינתן $(G,k)$ קלט ל $IS$ נבנה $(G^{\prime},k^{\prime})$ קלט ל $clique$ כך של 

$$G=(V,E)\to G^{\prime}=(V,\overline{E}) \ \ , \ \ k^{\prime}=k$$

באופן הזה מתקיים ש $(G,k)\in IS \to (G,k^{\prime})\in clique$ כי קיימת קבוצה בת״ל $S$ בגודל $k$ ולכן 

$$u,v\in S\to (u,v)\notin E\to (u,v)\in\overline{E}$$

ולכן בהכרח קיימת קליקה בגודל $k$ ב $G^{\prime}$ .
הכיוון השני זהה לחלוטין.

## סגירות לרדוקציית קארפ
__טענה:__
המחלקה $P$ סגורה לרדוקציית קארפ (כלומר אם $S\in P$ ויש רדוקציית קארפ מ $S^{\prime}$ ל $S$ אז גם $S^{\prime}\in P$) והמחלקה $NPC$ _לא סגורה לרדוקציית קארפ_.

==מסקנה:== אם $P\neq NP$ אזי $P\cap NPC =\emptyset$ .

__טענה:__
המחלקה $NP$ סגורה לרדוקציית קארפ.

![Pasted image 20230630235359.png](/img/user/Assets/Pasted%20image%2020230630235359.png)
יהי $S\in NP$ לכן קיים מוודא $V$ ופולינום $P$ כך ש:

$$\displaylines{
x\in S\leftrightarrow \exists_{y:|y|<P(|x|)}: V(x,y)=1\\
x\notin S\leftrightarrow \forall_{y: |y|<P(|x|)}: V(x,y)=0
}$$

נניח כי יש רדוקציית קארפ מ $S^{\prime}$ ל $S$ כלומר קיימת פונקציה $f$ שניתנת לחישוב בזמן פולינומי ומקיימת 

$$x\in S^{\prime}\leftrightarrow f(x)\in S$$

נגדיר מוודא $V^{\prime}$ עבור $S^{\prime}$ אשר מקבל זוג $(x,y)$ מחשב את $f(x)$ מחזיר את תשובת המוודא $V$ על $(f(x),y)$ . 

האלגוריתם של $V^{\prime}$ הינו פולינומי כי $V$ ו $f$ רצים בזמן פולינומי , נסמן את הפולינום החוסם את $|f(x)|$ כ $g(x)$  ויתקיים

$$x\in S^{\prime}\to f(x)\in S \to \exists_{y}: V(f(x),y)=1 \to \exists_{y:|y|\leq P(g(x))}: V^{\prime}(x,y)=1$$

באותו אופן 

$$x\notin S^{\prime}\to f(x)\notin S\to \forall_{y}:V(f(x),y)=0 \to \forall_{y}: V^{\prime}(x,y)=0$$

